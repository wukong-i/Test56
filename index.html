<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Telegram Canvas Mini App</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #020617;
    touch-action: manipulation;
  }

  canvas {
    display: block;
  }
</style>
</head>
<body>

<canvas id="app"></canvas>

<script>
  // Expand Telegram Mini App safely
  if (window.Telegram?.WebApp) {
    Telegram.WebApp.expand();
  }

  const canvas = document.getElementById("app");
  const ctx = canvas.getContext("2d");

  let buttons = [];

  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    createButtons();
    draw();
  }

  window.addEventListener("resize", resize);
  resize();

  function createButtons() {
    const bw = 260;
    const bh = 64;
    const gap = 18;
    const startY = canvas.height / 2 - (bh * 2);

    buttons = [
      { text: "Link One",   url: "https://example.com/1" },
      { text: "Link Two",   url: "https://example.com/2" },
      { text: "Link Three", url: "https://example.com/3" },
      { text: "Link Four",  url: "https://example.com/4" }
    ].map((b, i) => ({
      ...b,
      x: canvas.width / 2 - bw / 2,
      y: startY + i * (bh + gap),
      w: bw,
      h: bh
    }));
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Background
    ctx.fillStyle = "#020617";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.font = "bold 20px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    buttons.forEach(btn => {
      ctx.fillStyle = "#2563eb";
      ctx.fillRect(btn.x, btn.y, btn.w, btn.h);

      ctx.fillStyle = "#ffffff";
      ctx.fillText(btn.text, btn.x + btn.w / 2, btn.y + btn.h / 2);
    });
  }

  function handlePress(x, y) {
    for (const btn of buttons) {
      if (
        x >= btn.x &&
        x <= btn.x + btn.w &&
        y >= btn.y &&
        y <= btn.y + btn.h
      ) {
        if (window.Telegram?.WebApp) {
          Telegram.WebApp.openLink(btn.url, { try_instant_view: false });
        } else {
          window.open(btn.url, "_blank");
        }
        break;
      }
    }
  }

  // Touch support
  canvas.addEventListener("touchend", e => {
    const t = e.changedTouches[0];
    const r = canvas.getBoundingClientRect();
    handlePress(t.clientX - r.left, t.clientY - r.top);
  });

  // Mouse support
  canvas.addEventListener("click", e => {
    const r = canvas.getBoundingClientRect();
    handlePress(e.clientX - r.left, e.clientY - r.top);
  });

  // Disable context menu only (Telegram-safe)
  document.addEventListener("contextmenu", e => e.preventDefault());
</script>

</body>
</html>
